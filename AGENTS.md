# Руководство для агентов youtube2rss

## Общие требования

- **Всегда отвечайте на русском языке** - все ответы модели должны быть на русском языке
- Используйте принципы SOLID при написании кода
- Будьте лаконичны и точны в ответах
- Предлагайте решения, которые пользователь мог не рассмотреть

## Команды

- **Тесты:** `bun test` (все тесты) или `bun test <filename>` (один тест)
- **Сборка RSS:** `bun run build-rss`
- **Запуск:** `bun run start` (prod) или `bun run start:dev` (dev)
- **Сервер:** `bun run serve` (prod) или `bun run serve:dev` (dev)
- **Линтинг:** `bun run lint` (проверка) или `bun run lint:fix` (исправление)
- **Форматирование:** `bun run format` (проверка) или `bun run format:fix` (исправление)
- **Комплексная проверка:** `bun run check` (проверка) или `bun run check:fix` (исправление)

### PM2 команды

- **Запуск:** `bun run pm2:start` (prod) или `bun run pm2:start:dev` (dev)
- **Остановка:** `bun run pm2:stop`
- **Перезапуск:** `bun run pm2:restart`
- **Плавный перезапуск:** `bun run pm2:reload`
- **Удаление процессов:** `bun run pm2:delete`
- **Логи:** `bun run pm2:logs` (основной) или `bun run pm2:logs:server` (сервер)
- **Статус:** `bun run pm2:status`
- **Мониторинг:** `bun run pm2:monit`

## Стиль кода

- **Среда выполнения:** Bun с TypeScript ESNext модулями
- **Импорты:** Всегда используйте расширения `.ts` для локальных импортов
- **Типы:** Используйте TypeScript интерфейсы, строгий режим включён
- **Именование:** camelCase для переменных/функций, PascalCase для типов
- **Обработка ошибок:** Используйте блоки try/catch, правильные сообщения об ошибках
- **Окружение:** Используйте `Bun.env.VARIABLE_NAME` для переменных окружения
- **Асинхронность:** Используйте паттерн async/await, не промисы
- **Экспорты:** Используйте именованные экспорты, избегайте экспорта по умолчанию
- **Константы:** Используйте `const` для неизменяемых значений
- **Структура файлов:** Держите связанную функциональность в отдельных модулях

## Тестирование

- Файлы тестов в директории `src/tests/`
- Используйте обнаружение переменной окружения `IS_TEST=true`
- Моковые данные в `src/tests/data/`

## Semantic Commit Messages

Формат: `<type>(<scope>): <subject>` (`<scope>` опционален)

**Правила:**

- Сообщения коммитов **только на английском языке**
- Краткие и лаконичные (до 50 символов в заголовке)
- Используйте `git commit -S` для подписанных коммитов

**Типы коммитов:**

- `feat`: новая функциональность
- `fix`: исправление бага
- `docs`: изменения в документации
- `style`: форматирование кода
- `refactor`: рефакторинг кода
- `test`: добавление тестов
- `chore`: обновление зависимостей/конфигурации

**Примеры:** `feat: add image generation`, `fix: handle telegram errors`, `docs: update API guide`

## Конфигурация Ox

### Правила линтинга (oxlint)

- Используйте `const` вместо `let`, где это возможно
- Запретите неиспользуемые переменные
- Принудительная строгая типизация
- Используйте шаблонные строки
- Правильное форматирование импортов

### Правила форматирования (oxfmt)

- Отступы: 2 пробела
- Максимальная длина строки: 100 символов
- Одинарные кавычки для строк
- Точка с запятой в конце выражений
- Запятые в конце в многострочных структурах

### Интеграция

- Настройте pre-commit хуки
- Запускайте проверки в CI/CD пайплайне
- Настройте IDE для форматирования при сохранении и подсветки ошибок
